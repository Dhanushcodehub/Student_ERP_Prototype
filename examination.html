<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Student ERP ‚Äî Examinations</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Font helpers */
    .font-display { font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif; }
    .font-body { font-family: 'Roboto', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', sans-serif; }

    /* Smooth scrolling within lists */
    .nice-scroll::-webkit-scrollbar { width: 10px; height: 10px; }
    .nice-scroll::-webkit-scrollbar-track { background: #f5f7fb; border-radius: 999px; }
    .nice-scroll::-webkit-scrollbar-thumb { background: #d6e9ff; border-radius: 999px; border: 2px solid #f5f7fb; }
    .nice-scroll { scrollbar-width: thin; scrollbar-color: #d6e9ff #f5f7fb; }

    /* Subtle card hover (for mobile stacked cards) */
    .hover-card:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(0,0,0,0.06); }

    /* Fix 20px radius consistently */
    .rounded-20 { border-radius: 20px; }

    /* Safe focus ring */
    .focus-ring:focus { outline: none; box-shadow: 0 0 0 4px rgba(77,166,255,0.25); }

    /* Simple fade for modals/toasts */
    .fade-in { animation: fadeIn 180ms ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(4px);} to { opacity: 1; transform: translateY(0);} }

    /* Prevent text selection during quick taps */
    .no-select { user-select: none; }
    .heading{
        font-size: 25px !important;
    }
  </style>
</head>
<body class="bg-white text-[#555] font-body antialiased">

  <!-- Top Navigation -->
  <header class="fixed top-0 inset-x-0 z-50 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/80 border-b border-slate-100 shadow-sm">
    <div class="max-w-6xl mx-auto px-4 md:px-6">
      <div class="h-16 flex items-center justify-between">
        <!-- Left: Logo -->
        <a href="#" class="flex items-center gap-3 group" onclick="event.preventDefault()">
          <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-gradient-to-br from-[#e6f2ff] to-[#4da6ff]/20 ring-1 ring-[#4da6ff]/20">
            <!-- Simple logo -->
            <svg width="20" height="20" viewBox="0 0 24 24" class="text-[#4da6ff]">
              <path d="M3 11l9-7v16l-9-7zM14 7h7v10h-7" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </span>
          <div class="leading-tight">
            <div class="font-poppins font-semibold text-slate-900">Student ERP</div>
            <div class="text-xs text-slate-500 -mt-0.5">Campus Portal</div>
          </div>
        </a>

        <!-- Middle: Page Title -->
        <h1 class="hidden sm:block font-poppins font-semibold text-slate-900 tracking-tight heading">
          Announcements & Notices
        </h1>

        <!-- Right: Actions -->
        <div class="flex items-center gap-2">
          <!-- Notifications -->
          <div class="relative">
            <button id="btnBell" class="relative inline-flex items-center justify-center h-10 w-10 rounded-xl border border-slate-200 hover:border-[#4da6ff]/40 hover:bg-[#e6f2ff] transition-colors"
              aria-label="Notifications" type="button">
              <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-700">
                <path d="M15 17h5l-1.4-1.4A2 2 0 0 1 18 14.2V11a6 6 0 0 0-12 0v3.2c0 .5-.2 1-.6 1.4L4 17h5m6 0a3 3 0 0 1-6 0" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <span id="bellDot" class="hidden absolute -top-1 -right-1 h-2.5 w-2.5 bg-[#4da6ff] rounded-full ring-2 ring-white"></span>
            </button>
            <!-- Bell popover -->
            <div id="bellMenu" class="hidden absolute right-0 mt-2 w-80 bg-white rounded-2xl shadow-xl ring-1 ring-slate-100 p-3">
              <div class="flex items-center justify-between px-1 pb-2">
                <div class="font-poppins font-semibold text-slate-900">Recent</div>
                <button id="markAllRead" class="text-xs text-[#4da6ff] hover:underline">Mark all read</button>
              </div>
              <div id="bellList" class="space-y-2 max-h-64 overflow-auto nice-scroll pr-1"></div>
              <div class="pt-2 text-center">
                <a href="#latest" class="text-xs text-slate-500 hover:text-slate-700" onclick="closeAllMenus()">View all announcements</a>
              </div>
            </div>
          </div>

          <!-- Profile -->
          <div class="relative">
            <button id="btnProfile" class="inline-flex items-center justify-center h-10 px-3 rounded-xl border border-slate-200 hover:border-[#4da6ff]/40 hover:bg-[#e6f2ff] transition-colors gap-2" type="button">
              <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-700">
                <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 3c-4.418 0-8 2.239-8 5v1h16v-1c0-2.761-3.582-5-8-5Z" fill="currentColor"/>
              </svg>
              <span class="hidden sm:inline text-sm text-slate-800">Profile</span>
            </button>
            <!-- Profile dropdown -->
            <div id="profileMenu" class="hidden absolute right-0 mt-2 w-52 bg-white rounded-2xl shadow-xl ring-1 ring-slate-100 overflow-hidden">
              <div class="px-4 py-3">
                <div class="font-poppins font-semibold text-slate-900">John Doe</div>
                <div class="text-xs text-slate-500">Student ‚Ä¢ CS Dept</div>
              </div>
              <div class="border-t border-slate-100"></div>
              <button class="w-full text-left px-4 py-2.5 text-sm hover:bg-[#e6f2ff]" onclick="alert('Demo only')">View Profile</button>
              <button class="w-full text-left px-4 py-2.5 text-sm hover:bg-[#e6f2ff]" onclick="alert('Demo only')">Sign out</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="pt-20">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-6 space-y-8">

      <!-- Exam Notifications Card -->
      <section class="bg-white rounded-20 shadow-[0_12px_30px_rgba(0,0,0,0.06)] border border-[#eee]">
        <!-- Header -->
        <div class="px-6 md:px-8 py-5 border-b border-[#eee] flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 rounded-xl bg-[#e6f2ff] flex items-center justify-center text-lg">üìù</div>
            <h2 class="font-display font-bold text-[#333] text-lg sm:text-xl">Exam Notifications</h2>
          </div>
          <span class="hidden sm:inline-block text-xs text-[#777]">Updated just now</span>
        </div>

        <!-- Headings (Desktop) -->
        <div class="hidden md:grid grid-cols-12 gap-4 px-6 md:px-8 pt-4 text-xs font-medium text-[#777]">
          <div class="col-span-2">Date</div>
          <div class="col-span-3">Title</div>
          <div class="col-span-4">Description</div>
          <div class="col-span-2">Status</div>
          <div class="col-span-1 text-right">Action</div>
        </div>

        <!-- List -->
        <div class="px-2 sm:px-4 md:px-6 lg:px-8 py-2 max-h-[420px] overflow-y-auto nice-scroll" id="notificationList">

          <!-- Item 1 (Important + Upcoming) -->
          <article class="group md:grid grid-cols-12 gap-4 items-center p-4 md:p-3 my-2 bg-white rounded-2xl md:rounded-none hover:bg-[#f7fbff] transition-colors border-l-4 border-[#4da6ff] md:border-l-0 md:border-b md:border-[#eee] hover-card md:hover:transform-none md:hover:shadow-none">
            <!-- Mobile stacked labels -->
            <div class="md:col-span-2">
              <p class="text-sm md:text-base font-medium text-[#333]">10 Oct 2025</p>
              <p class="md:hidden text-xs text-[#777] mt-1">Upcoming</p>
            </div>
            <div class="md:col-span-3 mt-2 md:mt-0">
              <p class="font-medium text-[#333]">Mid-Sem Exam ‚Äì Mathematics</p>
              <p class="md:hidden text-xs text-[#777] mt-1">Core paper covering Units 1‚Äì3</p>
            </div>
            <div class="md:col-span-4 hidden md:block">
              <p class="text-sm">Syllabus finalized. Seating plan will be shared 3 days before the exam.</p>
            </div>
            <div class="md:col-span-2 mt-2 md:mt-0">
              <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#e6f2ff] text-[#1e40af]">Upcoming</span>
            </div>
            <div class="md:col-span-1 mt-3 md:mt-0 md:text-right">
              <button data-id="1" class="openDetails focus-ring inline-flex items-center gap-2 px-3 py-2 rounded-xl text-white bg-gradient-to-r from-[#4da6ff] to-[#3399ff] hover:from-[#1e90ff] hover:to-[#1e90ff] transition transform hover:scale-[1.02]">
                <span class="text-xs">Open Details</span>
              </button>
            </div>
            <!-- Mobile full description -->
            <div class="md:hidden mt-3 text-sm text-[#555]">
              Syllabus finalized. Seating plan will be shared 3 days before the exam.
            </div>
          </article>

          <!-- Item 2 (Ongoing) -->
          <article class="group md:grid grid-cols-12 gap-4 items-center p-4 md:p-3 my-2 bg-white rounded-2xl md:rounded-none hover:bg-[#f7fbff] transition-colors md:border-b md:border-[#eee] hover-card md:hover:transform-none md:hover:shadow-none">
            <div class="md:col-span-2">
              <p class="text-sm md:text-base font-medium text-[#333]">05‚Äì09 Oct 2025</p>
              <p class="md:hidden text-xs text-[#777] mt-1">Ongoing</p>
            </div>
            <div class="md:col-span-3 mt-2 md:mt-0">
              <p class="font-medium text-[#333]">Practical Exam ‚Äì Physics Lab</p>
              <p class="md:hidden text-xs text-[#777] mt-1">Batch-wise slots published on portal</p>
            </div>
            <div class="md:col-span-4 hidden md:block">
              <p class="text-sm">Ensure you reach the lab 15 minutes prior to your slot. Lab coats are mandatory.</p>
            </div>
            <div class="md:col-span-2 mt-2 md:mt-0">
              <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#4da6ff] text-white">Ongoing</span>
            </div>
            <div class="md:col-span-1 mt-3 md:mt-0 md:text-right">
              <button data-id="2" class="openDetails focus-ring inline-flex items-center gap-2 px-3 py-2 rounded-xl text-white bg-gradient-to-r from-[#4da6ff] to-[#3399ff] hover:from-[#1e90ff] hover:to-[#1e90ff] transition transform hover:scale-[1.02]">
                <span class="text-xs">Open Details</span>
              </button>
            </div>
            <div class="md:hidden mt-3 text-sm text-[#555]">
              Ensure you reach the lab 15 minutes prior to your slot. Lab coats are mandatory.
            </div>
          </article>

          <!-- Item 3 (Upcoming) -->
          <article class="group md:grid grid-cols-12 gap-4 items-center p-4 md:p-3 my-2 bg-white rounded-2xl md:rounded-none hover:bg-[#f7fbff] transition-colors md:border-b md:border-[#eee] hover-card md:hover:transform-none md:hover:shadow-none">
            <div class="md:col-span-2">
              <p class="text-sm md:text-base font-medium text-[#333]">15 Oct 2025</p>
              <p class="md:hidden text-xs text-[#777] mt-1">Upcoming</p>
            </div>
            <div class="md:col-span-3 mt-2 md:mt-0">
              <p class="font-medium text-[#333]">Finals Registration Deadline</p>
              <p class="md:hidden text-xs text-[#777] mt-1">Complete fee payment and form submission</p>
            </div>
            <div class="md:col-span-4 hidden md:block">
              <p class="text-sm">Submit the finals registration form and fee payment on the portal before 5 PM.</p>
            </div>
            <div class="md:col-span-2 mt-2 md:mt-0">
              <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#e6f2ff] text-[#1e40af]">Upcoming</span>
            </div>
            <div class="md:col-span-1 mt-3 md:mt-0 md:text-right">
              <button data-id="3" class="openDetails focus-ring inline-flex items-center gap-2 px-3 py-2 rounded-xl text-white bg-gradient-to-r from-[#4da6ff] to-[#3399ff] hover:from-[#1e90ff] hover:to-[#1e90ff] transition transform hover:scale-[1.02]">
                <span class="text-xs">Open Details</span>
              </button>
            </div>
            <div class="md:hidden mt-3 text-sm text-[#555]">
              Submit the finals registration form and fee payment on the portal before 5 PM.
            </div>
          </article>

          <!-- Item 4 (Completed) -->
          <article class="group md:grid grid-cols-12 gap-4 items-center p-4 md:p-3 my-2 bg-white rounded-2xl md:rounded-none hover:bg-[#f7fbff] transition-colors md:border-b md:border-[#eee] hover-card md:hover:transform-none md:hover:shadow-none">
            <div class="md:col-span-2">
              <p class="text-sm md:text-base font-medium text-[#333]">25 Sep 2025</p>
              <p class="md:hidden text-xs text-[#777] mt-1">Completed</p>
            </div>
            <div class="md:col-span-3 mt-2 md:mt-0">
              <p class="font-medium text-[#333]">Internal Assessment ‚Äì English</p>
              <p class="md:hidden text-xs text-[#777] mt-1">Results will be published soon</p>
            </div>
            <div class="md:col-span-4 hidden md:block">
              <p class="text-sm">The assessment is complete. Marks will be updated in ERP by next week.</p>
            </div>
            <div class="md:col-span-2 mt-2 md:mt-0">
              <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#f1f5f9] text-[#555]">Completed</span>
            </div>
            <div class="md:col-span-1 mt-3 md:mt-0 md:text-right">
              <button data-id="4" class="openDetails focus-ring inline-flex items-center gap-2 px-3 py-2 rounded-xl text-white bg-gradient-to-r from-[#4da6ff] to-[#3399ff] hover:from-[#1e90ff] hover:to-[#1e90ff] transition transform hover:scale-[1.02]">
                <span class="text-xs">Open Details</span>
              </button>
            </div>
            <div class="md:hidden mt-3 text-sm text-[#555]">
              The assessment is complete. Marks will be updated in ERP by next week.
            </div>
          </article>
        </div>
      </section>

      <!-- Hall Ticket Card -->
      <section class="bg-white rounded-20 shadow-[0_12px_30px_rgba(0,0,0,0.06)] border border-[#eee]">
        <!-- Header -->
        <div class="px-6 md:px-8 py-5 border-b border-[#eee] flex items-center gap-3">
          <div class="w-10 h-10 rounded-xl bg-[#e6f2ff] flex items-center justify-center text-lg">üìÑ</div>
          <h2 class="font-display font-bold text-[#333] text-lg sm:text-xl">Hall Ticket</h2>
        </div>

        <div class="px-6 md:px-8 py-6 grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- Student Info -->
          <div class="col-span-1 lg:col-span-1 bg-[#f7fbff] rounded-20 border border-[#eaf3ff] p-5">
            <h3 class="font-display font-semibold text-[#333] mb-4">Student Info</h3>
            <dl class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
              <div>
                <dt class="text-[#777]">Name</dt>
                <dd class="font-medium text-[#333]" id="studentName">Alex Johnson</dd>
              </div>
              <div>
                <dt class="text-[#777]">Roll No</dt>
                <dd class="font-medium text-[#333]" id="studentRoll">21BCE1023</dd>
              </div>
              <div>
                <dt class="text-[#777]">Course</dt>
                <dd class="font-medium text-[#333]" id="studentCourse">B.Tech ‚Äì CSE</dd>
              </div>
              <div>
                <dt class="text-[#777]">Semester</dt>
                <dd class="font-medium text-[#333]" id="studentSem">Sem 5</dd>
              </div>
            </dl>
          </div>

          <!-- Exam Details -->
          <div class="col-span-1 lg:col-span-1 bg-white rounded-20 border border-[#eee] p-5">
            <h3 class="font-display font-semibold text-[#333] mb-4">Exam Details</h3>
            <dl class="grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm">
              <div>
                <dt class="text-[#777]">Semester</dt>
                <dd class="font-medium text-[#333]" id="examSemester">Odd (Sem 5)</dd>
              </div>
              <div>
                <dt class="text-[#777]">Exam Type</dt>
                <dd class="font-medium text-[#333]" id="examType">Mid-Sem</dd>
              </div>
              <div>
                <dt class="text-[#777]">Date Range</dt>
                <dd class="font-medium text-[#333]" id="examRange">10 Oct ‚Äì 18 Oct 2025</dd>
              </div>
              <div>
                <dt class="text-[#777]">Venue</dt>
                <dd class="font-medium text-[#333]" id="examVenue">Main Campus</dd>
              </div>
            </dl>
          </div>

          <!-- Download -->
          <div class="col-span-1 lg:col-span-1 flex flex-col items-center justify-center text-center p-5 bg-white rounded-20 border border-[#eee]">
            <div class="mb-4">
              <div class="mx-auto w-16 h-16 rounded-2xl bg-[#e6f2ff] flex items-center justify-center text-2xl text-[#4da6ff]">‚¨áÔ∏è</div>
            </div>
            <button id="downloadBtn" class="focus-ring inline-flex items-center justify-center gap-3 px-6 py-3 rounded-full text-white bg-gradient-to-r from-[#4da6ff] to-[#3399ff] hover:from-[#1e90ff] hover:to-[#1e90ff] transition transform hover:scale-[1.03] shadow-md">
              <span class="font-medium">Download Hall Ticket</span>
            </button>
            <p class="mt-3 text-xs text-[#777]">Carry a printed copy to the examination hall</p>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Details Modal -->
  <div id="detailsModal" class="hidden fixed inset-0 z-50">
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="relative max-w-2xl mx-auto mt-24 bg-white rounded-20 shadow-2xl border border-[#eee] p-6 md:p-8 fade-in">
      <div class="flex items-start justify-between gap-4">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-xl bg-[#e6f2ff] flex items-center justify-center text-lg">üìù</div>
          <div>
            <h3 id="modalTitle" class="font-display font-bold text-[#333] text-lg">Title</h3>
            <p id="modalDate" class="text-xs text-[#777] mt-1">Date</p>
          </div>
        </div>
        <button id="closeModal" class="focus-ring px-3 py-2 rounded-xl hover:bg-[#f7fbff] transition no-select">‚úï</button>
      </div>
      <div class="mt-5 space-y-4">
        <div class="flex items-center gap-2">
          <span id="modalStatus" class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#e6f2ff] text-[#1e40af]">Status</span>
        </div>
        <p id="modalDesc" class="text-sm leading-relaxed">
          Description
        </p>
      </div>
      <div class="mt-6 flex items-center justify-end">
        <button id="modalDone" class="focus-ring inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-[#4da6ff] to-[#3399ff] hover:from-[#1e90ff] hover:to-[#1e90ff] transition">Got it</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="hidden fixed bottom-6 right-6 bg-[#333] text-white text-sm px-4 py-3 rounded-xl shadow-xl fade-in"></div>

  <!-- jsPDF for real PDF download -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-Ykq3n3pZ+9CkpRA0S9nM9vvEeI6bCz0Fq4Ofq7m7X/9t4q8bC2q6Nw+v/0k0r1lS8RgeqI5lW3l9h0XH5l1r8Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
    // Sample notification data (keep small)
    const notifications = [
      {
        id: 1,
        date: '10 Oct 2025',
        title: 'Mid-Sem Exam ‚Äì Mathematics',
        description: 'Syllabus finalized. Seating plan will be shared 3 days before the exam.',
        status: 'Upcoming',
        important: true
      },
      {
        id: 2,
        date: '05‚Äì09 Oct 2025',
        title: 'Practical Exam ‚Äì Physics Lab',
        description: 'Ensure you reach the lab 15 minutes prior to your slot. Lab coats are mandatory.',
        status: 'Ongoing',
        important: false
      },
      {
        id: 3,
        date: '15 Oct 2025',
        title: 'Finals Registration Deadline',
        description: 'Submit the finals registration form and fee payment on the portal before 5 PM.',
        status: 'Upcoming',
        important: false
      },
      {
        id: 4,
        date: '25 Sep 2025',
        title: 'Internal Assessment ‚Äì English',
        description: 'The assessment is complete. Marks will be updated in ERP by next week.',
        status: 'Completed',
        important: false
      }
    ];

    // Elements
    const bellBtn = document.getElementById('bellBtn');
    const profileBtn = document.getElementById('profileBtn');
    const bellMenu = document.getElementById('bellMenu');
    const profileMenu = document.getElementById('profileMenu');
    const viewProfile = document.getElementById('viewProfile');
    const logoutDemo = document.getElementById('logoutDemo');
    const toast = document.getElementById('toast');

    const detailsModal = document.getElementById('detailsModal');
    const closeModal = document.getElementById('closeModal');
    const modalDone = document.getElementById('modalDone');
    const modalTitle = document.getElementById('modalTitle');
    const modalDate = document.getElementById('modalDate');
    const modalDesc = document.getElementById('modalDesc');
    const modalStatus = document.getElementById('modalStatus');

    // Toggle helpers for dropdowns
    function closeAllMenus() {
      bellMenu.classList.add('hidden');
      profileMenu.classList.add('hidden');
    }
    bellBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      const isHidden = bellMenu.classList.contains('hidden');
      closeAllMenus();
      if (isHidden) bellMenu.classList.remove('hidden');
    });
    profileBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      const isHidden = profileMenu.classList.contains('hidden');
      closeAllMenus();
      if (isHidden) profileMenu.classList.remove('hidden');
    });
    document.addEventListener('click', () => closeAllMenus());

    // Toast
    let toastTimer;
    function showToast(message) {
      clearTimeout(toastTimer);
      toast.textContent = message;
      toast.classList.remove('hidden');
      toastTimer = setTimeout(() => toast.classList.add('hidden'), 2200);
    }
    viewProfile.addEventListener('click', (e) => { e.preventDefault(); showToast('Profile view is a demo.'); });
    logoutDemo.addEventListener('click', (e) => { e.preventDefault(); showToast('Sign out is a demo.'); });

    // Details modal
    function openDetails(id) {
      const item = notifications.find(n => n.id === Number(id));
      if (!item) return;
      modalTitle.textContent = item.title;
      modalDate.textContent = item.date;
      modalDesc.textContent = item.description;
      // Status badge styles
      modalStatus.textContent = item.status;
      if (item.status === 'Upcoming') {
        modalStatus.style.background = '#e6f2ff';
        modalStatus.style.color = '#1e40af';
      } else if (item.status === 'Ongoing') {
        modalStatus.style.background = '#4da6ff';
        modalStatus.style.color = '#fff';
      } else {
        modalStatus.style.background = '#f1f5f9';
        modalStatus.style.color = '#555';
      }
      detailsModal.classList.remove('hidden');
    }
    function closeDetails() {
      detailsModal.classList.add('hidden');
    }
    document.querySelectorAll('.openDetails').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const id = e.currentTarget.getAttribute('data-id');
        openDetails(id);
      });
    });
    closeModal.addEventListener('click', closeDetails);
    modalDone.addEventListener('click', closeDetails);
    detailsModal.addEventListener('click', (e) => {
      // Close when clicking backdrop only
      if (e.target === detailsModal.firstElementChild) return; // inner bg overlay is first child
      if (e.target === detailsModal) closeDetails();
    });
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDetails(); });

    // Download PDF (fully working)
    const downloadBtn = document.getElementById('downloadBtn');
    downloadBtn.addEventListener('click', async (e) => {
      e.preventDefault();
      try {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({ orientation: 'portrait', unit: 'pt', format: 'a4' });

        const name = document.getElementById('studentName').textContent;
        const roll = document.getElementById('studentRoll').textContent;
        const course = document.getElementById('studentCourse').textContent;
        const sem = document.getElementById('studentSem').textContent;
        const examSem = document.getElementById('examSemester').textContent;
        const examType = document.getElementById('examType').textContent;
        const examRange = document.getElementById('examRange').textContent;
        const examVenue = document.getElementById('examVenue').textContent;

        const blue = '#4da6ff';
        const gray = '#555555';

        // Header band
        doc.setFillColor(230, 242, 255); // #e6f2ff
        doc.rect(0, 0, doc.internal.pageSize.getWidth(), 80, 'F');

        // Title
        doc.setFont('helvetica', 'bold');
        doc.setTextColor(51, 51, 51);
        doc.setFontSize(20);
        doc.text('University Examination Hall Ticket', 40, 52);

        // Student Info box
        doc.setDrawColor(221,221,221);
        doc.setLineWidth(1);
        doc.roundedRect(40, 100, 515, 120, 8, 8);
        doc.setFontSize(12);
        doc.setTextColor(85, 85, 85);
        doc.text(`Name: ${name}`, 55, 130);
        doc.text(`Roll No: ${roll}`, 320, 130);
        doc.text(`Course: ${course}`, 55, 160);
        doc.text(`Semester: ${sem}`, 320, 160);

        // Exam Details box
        doc.roundedRect(40, 240, 515, 120, 8, 8);
        doc.setTextColor(85, 85, 85);
        doc.text(`Exam Semester: ${examSem}`, 55, 270);
        doc.text(`Exam Type: ${examType}`, 320, 270);
        doc.text(`Date Range: ${examRange}`, 55, 300);
        doc.text(`Venue: ${examVenue}`, 320, 300);

        // Note
        doc.setDrawColor(77, 166, 255); // #4da6ff
        doc.setLineWidth(0.8);
        doc.line(40, 380, 555, 380);
        doc.setTextColor(77, 166, 255);
        doc.setFont('helvetica', 'bold');
        doc.text('Important:', 40, 405);
        doc.setFont('helvetica', 'normal');
        doc.setTextColor(85, 85, 85);
        doc.text('Carry a printed copy of this hall ticket along with a valid ID.', 120, 405);

        // Footer
        doc.setFontSize(9);
        doc.setTextColor(150);
        const today = new Date().toLocaleDateString();
        doc.text(`Generated on ${today} via ERP`, 40, 820);

        doc.save(`Hall_Ticket_${name.replace(/\s+/g, '_')}.pdf`);
        showToast('Your hall ticket is downloading.');
      } catch (err) {
        showToast('Download failed. Please try again.');
        console.error(err);
      }
    });
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'982252a8e2049aa7',t:'MTc1ODM4MTc5NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
